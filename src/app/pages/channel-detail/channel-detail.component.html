<!-- [src]="channel.ifr[0] | safe" -->
<div class="c-bg-secondary">
	<div *ngIf="error; else channelDetail">
		<p>Canal no encontrado</p>
	</div>

	<ng-template #channelDetail>
		<div class="container">
			<div class="row" *ngIf="channel">
				<div class="col-12 py-3">
					<h5 class="text-center text-white position-relative">
						{{ channel.name | uppercase }}
						<div class="position-absolute top-0 end-0">
							{{ hour | async }}
						</div>
					</h5>
					<h6 *ngIf="currentProgram" class="text-center text-white">
						{{ currentProgram[0].title }}
					</h6>
				</div>
				<div class="col-12">
					<div style="width: 80%; margin: auto">
						<div class="position-relative" style="padding-top: 56.25%">
							<iframe
								[src]="decodeIframe(channel) | safe"
								width="100%"
								height="100%"
								class="position-absolute"
								style="top: 0; left: 0; right: 0; bottom: 0"
								allow="accelerometer; autoplay; clipboard-write; encrypted-media; picture-in-picture"
								sandbox="allow-forms allow-pointer-lock allow-same-origin allow-scripts allow-top-navigation"
								allowfullscreen
								id="playframe"
								scrolling="no"></iframe>
						</div>
					</div>
				</div>

				<div class="col-12 d-flex justify-content-center">
					<div class="btn-group my-4" role="group">
						<button
							type="button"
							class="btn btn-primary"
							[ngClass]="{ disabled: disablePrevButton }"
							(click)="goPrevChannel()">
							Anterior
						</button>
						<button
							type="button"
							class="btn btn-primary"
							(click)="goHomeChannel()">
							Inicio
						</button>
						<button
							type="button"
							class="btn btn-primary"
							[ngClass]="{ disabled: disableNextButton }"
							(click)="goNextChannel()">
							Siguiente
						</button>
						<div class="btn-group" role="group">
							<button
								type="button"
								class="btn btn-primary dropdown-toggle"
								data-bs-toggle="dropdown"
								aria-haspopup="true"
								aria-expanded="false">
								{{ categoryActived === 'all' ? 'Todas' : categoryActived }}
							</button>
							<div class="dropdown-menu dropdown-menu-end">
								<a
									class="dropdown-item"
									[ngClass]="{ active: 'all' === categoryActived }"
									(click)="filterByCategory('all')"
									>Todas</a
								>
								<a
									class="dropdown-item"
									[ngClass]="{ active: category === categoryActived }"
									(click)="filterByCategory(category)"
									*ngFor="let category of categories"
									>{{ category | titlecase }}</a
								>
							</div>
						</div>
					</div>
				</div>
				<div class="col-12" *ngIf="channel.schedules.length > 0">
					<div class="table-responsive fs-md mb-4">
						<table class="table mb-0">
							<thead>
								<tr>
									<th style="color: white !important">H.Inicio</th>
									<th style="color: white !important">H.Fin</th>
									<th style="color: white !important">Programa</th>
								</tr>
							</thead>
							<tbody>
								<tr *ngFor="let schedule of channel.schedules">
									<td class="py-2" style="color: white !important">
										{{ schedule.start }}
									</td>
									<td class="py-2" style="color: white !important">
										{{ schedule.end }}
									</td>
									<td class="py-2" style="color: white !important">
										{{ schedule.title }}
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</ng-template>
</div>
